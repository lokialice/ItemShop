<template>
<div class="nk-main">

    <!-- START: Breadcrumbs -->
    <div class="nk-gap-1"></div>
    <div class="container">
        <ul class="nk-breadcrumbs">

            <li><a href="index-2.html">Home</a></li>

            <li><span class="fa fa-angle-right"></span></li>

            <li>
                <h3 class="nk-decorated-h-2"><span><span class="text-main-1">BEST</span> SELLER</span></h3>
            </li>

        </ul>
    </div>
    <div class="nk-gap-1"></div>
    <!-- END: Breadcrumbs -->

    <div class="container">

        <!-- START: Some Products -->
        <div class="nk-gap-2"></div>
        <div class="row vertical-gap">
            <div class="col-md-6 col-lg-4">
                <div class="nk-gallery-item-box">
                    <a href="store-product.html" class="nk-gallery-item">
                            <span class="nk-gallery-item-overlay"><span><span class="nk-icon-circles"></span></span>
                            </span>
                            <img src="@/assets/images/skin01.png" alt="Skin 1">
                        </a>
                    <div class="nk-gallery-item-label">
                        <h4 class="mb-0">Juggernaut</h4>
                        <div class="nk-product-price">Price: 14 IST</div>
                        <div class="nk-gap-1"></div>
                        <a class="nk-btn nk-btn-rounded nk-btn-color-dark-3 nk-btn-hover-color-main-1" v-on:click="orderFromMerchant('D121',14)">Buy now</a>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg-4 order-lg-3">
                <div class="nk-gallery-item-box">
                    <a href="store-product.html" class="nk-gallery-item">
                            <span class="nk-gallery-item-overlay"><span><span class="nk-icon-circles"></span></span>
                            </span>
                            <img src="@/assets/images/skin02.jpg" alt="">
                        </a>
                    <div class="nk-gallery-item-label">
                        <h4 class="mb-0">Demon eater</h4>
                        <div class="nk-product-price">Price: 14 IST</div>
                        <div class="nk-gap-1"></div>
                        <a href="#" class="nk-btn nk-btn-rounded nk-btn-color-dark-3 nk-btn-hover-color-main-1">Buy now</a>
                    </div>
                </div>
            </div>
            <div class="col-md-12 col-lg-4">
                <div class="row vertical-gap">
                    <div class="col-md-6">
                        <div class="nk-gallery-item-box">
                            <a href="store-product.html" class="nk-gallery-item">
                                    <span class="nk-gallery-item-overlay"><span><span class="nk-icon-circles"></span></span>
                                    </span>
                                    <img src="@/assets/images/skin02.jpg" alt="Demon eater">  
                                </a>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="nk-gallery-item-box">
                            <a href="store-product.html" class="nk-gallery-item">
                                    <span class="nk-gallery-item-overlay"><span><span class="nk-icon-circles"></span></span>
                                    </span>
                                    <img src="https://cdn-html.nkdev.info/goodgames/assets/images/product-1-lg.jpg" alt="So saying he unbuckled">
                                </a>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="nk-gallery-item-box">
                            <a href="store-product.html" class="nk-gallery-item">
                                    <span class="nk-gallery-item-overlay"><span><span class="nk-icon-circles"></span></span>
                                    </span>
                                    <img src="https://cdn-html.nkdev.info/goodgames/assets/images/product-5-lg.jpg" alt="In all revolutions of">
                                </a>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="nk-gallery-item-box">
                            <a href="store-product.html" class="nk-gallery-item">
                                    <span class="nk-gallery-item-overlay"><span><span class="nk-icon-circles"></span></span>
                                    </span>
                                    <img src="https://cdn-html.nkdev.info/goodgames/assets/images/product-6-lg.jpg" alt="Just then her head ">
                                </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- START: Famous Games -->
        <div class="nk-gap-3"></div>
        <h3 class="nk-decorated-h-2"><span><span class="text-main-1">Famous</span> Games</span></h3>
        <div class="nk-gap"></div>
        <div class="row vertical-gap">

            <div class="col-lg-6">
                <div class="nk-product-cat-2">
                    <a class="nk-product-image" href="store-product.html">
                            <img src="@/assets/images/dota-22.jpg" alt="DOTA 2">
                            <img src="@/assets/images/dota-2.jpg" alt="DOTA 2">
                        </a>
                    <div class="nk-product-cont">
                        <h3 class="nk-product-title h5"><a href="store-product.html">DOTA 2</a></h3>
                        <div class="nk-gap-1"></div>
                        <div class="nk-product-rating" data-rating="3.5"> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fas fa-star-half"></i> <i class="far fa-star"></i></div>
                        <div class="nk-gap-1"></div>
                        Dota 2 is a multiplayer online battle arena (MOBA) video game developed and published by Valve Corporation. The game is a sequel to Defense of the Ancients (DotA). Dota 2 is played in matches between two teams of five players, with each team occupying and defending their own separate base on the map.
                        <!-- <div class="nk-gap-2"></div>
                            <div class="nk-product-price">  14</div>
                            <div class="nk-gap-1"></div>
                            <a href="#" class="nk-btn nk-btn-rounded nk-btn-color-dark-3 nk-btn-hover-color-main-1">Add to Cart</a> -->
                    </div>
                </div>
            </div>

            <div class="col-lg-6">
                <div class="nk-product-cat-2">
                    <a class="nk-product-image" href="store-product.html">
                            <img src="https://cdn-html.nkdev.info/goodgames/assets/images/product-8-md.jpg" alt="She was bouncing away">
                        </a>
                    <div class="nk-product-cont">
                        <h3 class="nk-product-title h5"><a href="store-product.html">Acient Devil</a></h3>
                        <div class="nk-gap-1"></div>
                        <div class="nk-product-rating" data-rating="4.5"> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fas fa-star-half"></i></div>
                        <div class="nk-gap-1"></div>
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
                        <div class="nk-gap-2"></div>
                    </div>
                </div>
            </div>

            <div class="col-lg-6">
                <div class="nk-product-cat-2">
                    <a class="nk-product-image" href="store-product.html">
                            <img src="https://cdn-html.nkdev.info/goodgames/assets/images/product-9-md.jpg">
                        </a>
                    <div class="nk-product-cont">
                        <h3 class="nk-product-title h5"><a href="store-product.html">End Of The World</a></h3>
                        <div class="nk-gap-1"></div>
                        <div class="nk-product-rating" data-rating="5"> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i></div>
                        <div class="nk-gap-1"></div>
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
                        <div class="nk-gap-2"></div>
                    </div>
                </div>
            </div>

            <div class="col-lg-6">
                <div class="nk-product-cat-2">
                    <a class="nk-product-image" href="store-product.html">
                            <img src="https://cdn-html.nkdev.info/goodgames/assets/images/product-10-md.jpg" alt="My mother was so much">
                        </a>
                    <div class="nk-product-cont">
                        <h3 class="nk-product-title h5"><a href="store-product.html">Satan</a></h3>
                        <div class="nk-gap-1"></div>
                        <div class="nk-product-rating" data-rating="3.5"> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fas fa-star-half"></i> <i class="far fa-star"></i></div>
                        <div class="nk-gap-1"></div>
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
                    </div>
                </div>
            </div>

        </div>
        <!-- END: Featured Games -->

        <!-- START: Most Popular -->
        <div class="nk-gap-3"></div>
        <h3 class="nk-decorated-h-2"><span><span class="text-main-1">Cheapest</span> Items</span></h3>
        <div class="nk-gap"></div>
        <div class="row vertical-gap">

            <div class="col-lg-4 col-md-6">
                <div class="nk-product-cat">
                    <a class="nk-product-image" href="store-product.html">
                            <img src="https://cdn-html.nkdev.info/goodgames/assets/images/product-11-xs.jpg" alt="She gave my mother">
                        </a>
                    <div class="nk-product-cont">
                        <h3 class="nk-product-title h5"><a href="store-product.html">Machine Woman</a></h3>
                        <div class="nk-gap-1"></div>
                        <div class="nk-product-rating" data-rating="3"> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="far fa-star"></i> <i class="far fa-star"></i></div>
                        <div class="nk-gap-1"></div>
                        <div class="nk-product-price">Price: 14 IST</div>
                    </div>
                </div>
            </div>

            <div class="col-lg-4 col-md-6">
                <div class="nk-product-cat">
                    <a class="nk-product-image" href="store-product.html">
                            <img src="https://cdn-html.nkdev.info/goodgames/assets/images/product-12-xs.jpg" alt="A hundred thousand">
                        </a>
                    <div class="nk-product-cont">
                        <h3 class="nk-product-title h5"><a href="store-product.html">GTA 5</a></h3>
                        <div class="nk-gap-1"></div>
                        <div class="nk-product-rating" data-rating="4.5"> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fas fa-star-half"></i></div>
                        <div class="nk-gap-1"></div>
                        <div class="nk-product-price">Price: 20 IST</div>
                    </div>
                </div>
            </div>

            <div class="col-lg-4 col-md-6">
                <div class="nk-product-cat">
                    <a class="nk-product-image" href="store-product.html">
                            <img src="https://cdn-html.nkdev.info/goodgames/assets/images/product-13-xs.jpg" >
                        </a>
                    <div class="nk-product-cont">
                        <h3 class="nk-product-title h5"><a href="store-product.html">Warrior</a></h3>
                        <div class="nk-gap-1"></div>
                        <div class="nk-product-rating" data-rating="5"> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i></div>
                        <div class="nk-gap-1"></div>
                        <div class="nk-product-price">Price: 23 IST</div>
                    </div>
                </div>
            </div>

            <div class="col-lg-4 col-md-6">
                <div class="nk-product-cat">
                    <a class="nk-product-image" href="store-product.html">
                            <img src="https://cdn-html.nkdev.info/goodgames/assets/images/product-14-xs.jpg" alt="However, I have reason">
                        </a>
                    <div class="nk-product-cont">
                        <h3 class="nk-product-title h5"><a href="store-product.html">Sample Game</a></h3>
                        <div class="nk-gap-1"></div>
                        <div class="nk-product-rating" data-rating="1.5"> <i class="fa fa-star"></i> <i class="fas fa-star-half"></i> <i class="far fa-star"></i> <i class="far fa-star"></i> <i class="far fa-star"></i></div>
                        <div class="nk-gap-1"></div>
                        <div class="nk-product-price">Price: 32 IST</div>
                    </div>
                </div>
            </div>

            <div class="col-lg-4 col-md-6">
                <div class="nk-product-cat">
                    <a class="nk-product-image" href="store-product.html">
                            <img src="https://cdn-html.nkdev.info/goodgames/assets/images/product-15-xs.jpg" alt="At first, for some time">
                        </a>
                    <div class="nk-product-cont">
                        <h3 class="nk-product-title h5"><a href="store-product.html">Sample Game</a></h3>
                        <div class="nk-gap-1"></div>
                        <div class="nk-product-rating" data-rating="4"> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="far fa-star"></i></div>
                        <div class="nk-gap-1"></div>
                        <div class="nk-product-price">Price: 14 IST</div>
                    </div>
                </div>
            </div>

            <div class="col-lg-4 col-md-6">
                <div class="nk-product-cat">
                    <a class="nk-product-image" href="store-product.html">
                            <img src="https://cdn-html.nkdev.info/goodgames/assets/images/product-16-xs.jpg" alt="When the last &#39;natural&#39;">
                        </a>
                    <div class="nk-product-cont">
                        <h3 class="nk-product-title h5"><a href="store-product.html">Sample Game</a></h3>
                        <div class="nk-gap-1"></div>
                        <div class="nk-product-rating" data-rating="4.5"> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fas fa-star-half"></i></div>
                        <div class="nk-gap-1"></div>
                        <div class="nk-product-price">Price: 20 IST</div>
                    </div>
                </div>
            </div>

        </div>
        <!-- END: Most Popular -->
    </div>

    <div class="nk-gap-2"></div>

    <!-- START: Footer -->
    <footer class="nk-footer">

        <div class="container">
            <div class="nk-gap-3"></div>
            <div class="row vertical-gap">
                <div class="col-md-6">
                    <div class="nk-widget">
                        <h4 class="nk-widget-title"><span class="text-main-1">Contact</span> With Us</h4>
                        <div class="nk-widget-content">
                            <form action="https://html.nkdev.info/goodgames/php/ajax-contact-form.php" class="nk-form nk-form-ajax">
                                <div class="row vertical-gap sm-gap">
                                    <div class="col-md-6">
                                        <input type="email" class="form-control required" name="email" placeholder="Email *">
                                        </div>
                                        <div class="col-md-6">
                                            <input type="text" class="form-control required" name="name" placeholder="Name *">
                                        </div>
                                        </div>
                                        <div class="nk-gap"></div>
                                        <textarea class="form-control required" name="message" rows="5" placeholder="Message *"></textarea>
                                        <div class="nk-gap-1"></div>
                                        <button class="nk-btn nk-btn-rounded nk-btn-color-white">
                                        <span>Send</span>
                                        <span class="icon"><i class="ion-paper-airplane"></i></span>
                                    </button>
                                        <div class="nk-form-response-success"></div>
                                        <div class="nk-form-response-error"></div>
                            </form>
                        </div>
                    </div>
                </div>

            </div>
            <div class="nk-gap-3"></div>
        </div>

        <div class="nk-copyright">
            <div class="container">
                <div class="nk-copyright-right">
                    <ul class="nk-social-links-2">
                        <li><a class="nk-social-rss" href="#"><span class="fa fa-rss"></span></a></li>
                        <li><a class="nk-social-twitch" href="#"><span class="fab fa-twitch"></span></a></li>
                        <li><a class="nk-social-steam" href="#"><span class="fab fa-steam"></span></a></li>
                        <li><a class="nk-social-facebook" href="#"><span class="fab fa-facebook"></span></a></li>
                        <li><a class="nk-social-google-plus" href="#"><span class="fab fa-google-plus"></span></a></li>
                        <li><a class="nk-social-twitter" href="https://twitter.com/nkdevv" target="_blank"><span class="fab fa-twitter"></span></a></li>
                        <li><a class="nk-social-pinterest" href="#"><span class="fab fa-pinterest-p"></span></a></li>

                    </ul>
                </div>
            </div>
        </div>
    </footer>
    <!-- END: Footer -->

</div>
</template>

<script>
var Web3 = require("web3");
const bigInt = require("big-integer");
export default {
    name: 'StoreComponent',
    data() {
        return {

        }
    },
    mounted: function () {
        if (typeof window.web3 !== "undefined") {
            web3 = new Web3(window.web3.currentProvider);
        } else {
            var web3 = new Web3(
                new Web3.providers.HttpProvider(
                    "https://rinkeby.infura.io/v3/099d1bf4a64847f1a9ed28288d6ae43f"
                )
            );
        }
    },
    methods: {
        orderFromMerchant(idx, price) {
            console.log("aa")
            if (window.web3 != undefined) {
                web3 = new Web3(window.web3.currentProvider);

                web3.eth.net.getNetworkType().then(result => {
                    var defaultAccount = web3.currentProvider.publicConfigStore.getState();

                    const {
                        toHex
                    } = web3.utils;
                    var abiItemShop = JSON.parse(
                        '[{"constant":false,"inputs":[{"name":"_newPriviledgedAddress","type":"address"}],"name":"ownerSetPriviledgedAddress","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"idx","type":"bytes32"},{"name":"status","type":"bool"}],"name":"changeUserSaleStatus","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"tokensFrozen","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"standard","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"priviledgedAddressBurnUnsoldCoins","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"idx","type":"bytes32"},{"name":"priceItem","type":"uint256"}],"name":"changePriceItem","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"idx","type":"bytes32"},{"name":"status","type":"bool"}],"name":"changeMerchantSaleStatus","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"balanceOf","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"games","outputs":[{"name":"name","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"idx","type":"bytes32"},{"name":"gameId","type":"address"},{"name":"nameItem","type":"bytes32"},{"name":"priceItem","type":"uint256"}],"name":"addItemGame","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"priviledgedAddress","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"newOwner","type":"address"}],"name":"ownerTransferOwnership","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"ist","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"idx","type":"bytes32"},{"name":"priceItem","type":"uint256"},{"name":"fromUser","type":"address"}],"name":"orderItemFromUser","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"bytes32"}],"name":"itemGames","outputs":[{"name":"gameID","type":"address"},{"name":"name","type":"bytes32"},{"name":"price","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"},{"name":"","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"nameOfGame","type":"bytes32"},{"name":"gameOwner","type":"address"}],"name":"addGame","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"itemOwners","outputs":[{"components":[{"name":"gameID","type":"address"},{"name":"name","type":"bytes32"},{"name":"price","type":"uint256"}],"name":"item","type":"tuple"},{"name":"isUserSale","type":"bool"},{"name":"isMerchantSale","type":"bool"},{"name":"statusOwner","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"idx","type":"bytes32"},{"name":"owner","type":"address"}],"name":"checkItemOwner","outputs":[{"components":[{"components":[{"name":"gameID","type":"address"},{"name":"name","type":"bytes32"},{"name":"price","type":"uint256"}],"name":"item","type":"tuple"},{"name":"isUserSale","type":"bool"},{"name":"isMerchantSale","type":"bool"},{"name":"statusOwner","type":"bool"}],"name":"itemOwner","type":"tuple"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"idx","type":"bytes32"},{"name":"priceItem","type":"uint256"}],"name":"orderItemFromMerchant","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_from","type":"address"},{"indexed":true,"name":"_to","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_owner","type":"address"},{"indexed":true,"name":"_spender","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"Frozen","type":"bool"}],"name":"LogTokensFrozen","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"name","type":"bytes32"},{"indexed":false,"name":"gameOwner","type":"address"}],"name":"GameLog","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"idx","type":"bytes32"},{"indexed":false,"name":"priceItem","type":"uint256"}],"name":"ChangePriceLog","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"idx","type":"bytes32"},{"indexed":false,"name":"gameId","type":"address"},{"indexed":false,"name":"nameItem","type":"bytes32"},{"indexed":false,"name":"priceItem","type":"uint256"}],"name":"AddItemGameLog","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"idx","type":"bytes32"},{"indexed":false,"name":"priceItem","type":"uint256"},{"indexed":false,"name":"buyer","type":"address"},{"indexed":false,"name":"merchant","type":"address"}],"name":"OrderItemFromMerchantLog","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"idx","type":"bytes32"},{"indexed":false,"name":"priceItem","type":"uint256"},{"indexed":false,"name":"fromUser","type":"address"},{"indexed":false,"name":"buyer","type":"address"}],"name":"OrderItemFromMerchantUserLog","type":"event"}]'
                    );
                    var MyContractItemShop = new web3.eth.Contract(
                        abiItemShop,
                        "0x53071c6fd9c9f791E02667f1253856f8747278aC"
                    );

                    var stand = bigInt("1e18");
                    if (defaultAccount.selectedAddress == undefined) {
                        this.$swal({
                            title: "Please unlock your MetasMask !",
                            type: "warning"
                        });
                    } else {
                        console.log(web3.utils.utf8ToHex(idx))
                        var signData = "You buy item from ItemShop";
                        web3.eth.personal
                            .sign(signData, defaultAccount.selectedAddress)
                            .then(
                                signature => {
                                    var signing_address = web3.eth.personal
                                        .ecRecover(web3.utils.utf8ToHex(signData), signature)
                                        .then(result => {
                                            var priceToWei = web3.utils.toWei(price.toString(), 'ether');

                                            MyContractItemShop.methods.approve("0x53071c6fd9c9f791E02667f1253856f8747278aC", priceToWei).send({
                                                    from: result,
                                                },
                                                function (error, transactionHash) {
                                                    if (!error) {
                                                        MyContractItemShop.methods.orderItemFromMerchant(web3.utils.utf8ToHex(idx), priceToWei).send({
                                                                from: result,
                                                            },
                                                            function (error, transactionHash) {
                                                                if (!error) {
                                                                    this.$swal({
                                                                        title: "Buy item success!",
                                                                        type: "success"
                                                                    });
                                                                }
                                                            }
                                                        );
                                                    }
                                                }
                                            );
                                        });
                                },
                                error => {
                                    this.$swal({
                                        title: "Please sign transaction before submit transaction !",
                                        type: "warning"
                                    });
                                }
                            );

                    }
                });
            } else {
                this.$swal({
                    title: "Please install MetaMask before play game!",
                    type: "warning"
                });
            }
        },
    }
}
</script>
